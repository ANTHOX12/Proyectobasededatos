<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hoja de Vida</title>

  <style>
    :root{
      --navy:#243A53;
      --navy2:#1f3348;
      --bg:#f1f3f7;
      --text:#0f172a;
      --muted:#4b5563;
      --white:#ffffff;
      --pill:#2b3e56;
      --radius:22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--text);
    }
    .page{
      max-width: 1100px;
      margin: 18px auto;
      padding: 18px;
    }
    .sheet{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 22px;
      background: transparent;
    }
    @media (max-width: 980px){
      .sheet{grid-template-columns: 1fr}
    }

    /* LEFT CARD */
    .left{
      background: var(--navy);
      color: var(--white);
      border-radius: var(--radius);
      padding: 18px 18px 20px;
      position: sticky;
      top: 18px;
      height: fit-content;
    }
    @media (max-width: 980px){
      .left{ position: relative; top: auto; }
    }
    .avatar{
      width: 170px;
      height: 170px;
      margin: 6px auto 14px;
      border-radius: 22px;
      overflow:hidden;
      border: 2px solid rgba(255,255,255,.6);
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
      background: rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .avatar img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display:block;
    }
    .name{
      text-align:left;
      font-size: 38px;
      line-height: 1.02;
      margin: 10px 0 10px;
      letter-spacing:.2px;
      font-weight: 800;
    }
    .role{
      display:inline-block;
      margin-top: 8px;
      background: rgba(255,255,255,.92);
      color: var(--navy2);
      padding: 7px 10px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 12px;
      letter-spacing: .14em;
      text-transform: uppercase;
    }

    .left-section{
      margin-top: 18px;
      padding-top: 14px;
      border-top: 1px solid rgba(255,255,255,.18);
    }
    .left-title{
      font-size: 13px;
      letter-spacing: .12em;
      text-transform: uppercase;
      margin: 0 0 10px;
      font-weight: 800;
    }
    .contact{
      display:grid;
      gap: 10px;
      font-size: 13px;
      color: rgba(255,255,255,.9);
    }
    .c-row{
      display:grid;
      grid-template-columns: 18px 1fr;
      gap: 10px;
      align-items:center;
    }
    .ico{
      width: 18px;
      height: 18px;
      opacity:.9;
    }
    .mutedL{ color: rgba(255,255,255,.78); font-size: 12px; }

    .bullets{
      margin: 0;
      padding-left: 16px;
      color: rgba(255,255,255,.9);
      font-size: 13px;
    }
    .bullets li{ margin: 6px 0; }

    /* RIGHT */
    .right{
      background: transparent;
      display:grid;
      grid-template-columns: 1fr 320px;
      gap: 22px;
    }
    @media (max-width: 980px){
      .right{ grid-template-columns: 1fr; }
    }
    .col{
      display:flex;
      flex-direction:column;
      gap: 18px;
    }
    .card{
      background: var(--white);
      border-radius: var(--radius);
      padding: 18px;
      box-shadow: 0 10px 24px rgba(16,24,40,.08);
    }
    .pill{
      display:inline-block;
      background: var(--pill);
      color: var(--white);
      padding: 8px 16px;
      border-radius: 999px;
      font-weight: 800;
      letter-spacing: .08em;
      text-transform: uppercase;
      font-size: 12px;
      margin-bottom: 12px;
      width: 100%;
    }
    .p{
      margin: 0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
    }

    .xp{
      display:flex;
      flex-direction:column;
      gap: 14px;
    }
    .xp-item h3{
      margin: 0 0 4px;
      font-size: 13px;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .xp-meta{
      font-size: 12px;
      color: var(--navy2);
      font-style: italic;
      margin-bottom: 6px;
      font-weight: 700;
    }
    .sep{
      border: none;
      border-top: 1px solid #e6e9ef;
      margin: 10px 0 0;
    }

    .list{
      margin: 0;
      padding-left: 18px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
    }
    .lang{
      display:grid;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
    }
    .lang-row{
      display:flex;
      justify-content:space-between;
      gap: 10px;
    }
    .lang-row b{ color: var(--navy2); }
    .btn{
      margin-top: 10px;
      width: 100%;
      border: none;
      border-radius: 12px;
      padding: 10px 12px;
      background: rgba(255,255,255,.12);
      color: #fff;
      cursor:pointer;
      font-weight: 800;
    }
    @media print{
      body{ background: #fff; }
      .page{ margin:0; padding:0; }
      .left{ position: relative; }
      .card{ box-shadow:none; }
      .btn{ display:none; }
    }
  </style>
</head>

<body>
  <div class="page">

    {% if perfil %}

    <div class="sheet">

      <!-- LEFT -->
      <aside class="left">
        <div class="avatar">
          <!-- Si luego guardas ruta de foto, aqu√≠ la pones -->
          <img src="https://via.placeholder.com/300x300.png?text=FOTO" alt="Foto">
        </div>

        <div class="name">
          {{ perfil.nombres }}<br/>
          {{ perfil.apellidos }}
        </div>

        <div class="role">
          {% if perfil.descripcion_de_perfil %}
            {{ perfil.descripcion_de_perfil }}
          {% else %}
            PERFIL PROFESIONAL
          {% endif %}
        </div>

        <button class="btn" id="btnPrint">Imprimir / PDF</button>

        <div class="left-section">
          <div class="left-title">Contacto</div>
          <div class="contact">
            <div class="c-row">
              <span class="ico">‚òé</span>
              <div>
                {{ perfil.telefono_convencional|default:"-" }}
                {% if perfil.telefono_fijo %}<div class="mutedL">{{ perfil.telefono_fijo }}</div>{% endif %}
              </div>
            </div>

            <div class="c-row">
              <span class="ico">üìç</span>
              <div>{{ perfil.direccion_domiciliaria|default:"-" }}</div>
            </div>

            <div class="c-row">
              <span class="ico">üåê</span>
              <div>{{ perfil.sitioweb|default:"-" }}</div>
            </div>
          </div>
        </div>

        <div class="left-section">
          <div class="left-title">Informaci√≥n</div>
          <ul class="bullets">
            {% if perfil.licencia_de_conducir %}<li>Licencia: {{ perfil.licencia_de_conducir }}</li>{% endif %}
            <li>Nacionalidad: {{ perfil.nacionalidad|default:"-" }}</li>
            <li>C√©dula: {{ perfil.numero_de_cedula }}</li>
            <li>Sexo: {{ perfil.get_sexo_display }}</li>
            {% if perfil.estado_civil %}<li>Estado civil: {{ perfil.estado_civil }}</li>{% endif %}
          </ul>
        </div>
      </aside>

      <!-- RIGHT -->
      <section class="right">

        <!-- Main column -->
        <div class="col">

          <div class="card">
            <div class="pill">Mi perfil</div>
            <p class="p">
              {% if perfil.descripcion_de_perfil %}
                {{ perfil.descripcion_de_perfil }}
              {% else %}
                Aqu√≠ va una descripci√≥n corta de tu perfil profesional (2‚Äì4 l√≠neas).
              {% endif %}
            </p>
          </div>

          <div class="card">
            <div class="pill">Experiencia</div>

            <div class="xp">
              {% for exp in experiencias %}
                <div class="xp-item">
                  <h3>{{ exp.cargo_desempenado }}</h3>
                  <div class="xp-meta">
                    {{ exp.nombre_de_la_empresa }}
                    {% if exp.lugarempresa %} ¬∑ {{ exp.lugarempresa }}{% endif %}
                    ¬∑ {{ exp.fecha_de_inicio_de_gestion|default:"-" }} ‚Äî {{ exp.fecha_fin_de_gestion|default:"-" }}
                  </div>

                  <p class="p">
                    {% if exp.descripcion_de_funciones %}
                      {{ exp.descripcion_de_funciones }}
                    {% else %}
                      Descripci√≥n de funciones / logros principales.
                    {% endif %}
                  </p>
                  <hr class="sep">
                </div>
              {% empty %}
                <p class="p">No hay experiencia marcada para mostrar.</p>
              {% endfor %}
            </div>
          </div>

        </div>

        <!-- Side column -->
        <div class="col">

          <div class="card">
            <div class="pill">Formaci√≥n</div>

            {% for curso in cursos %}
              <div style="margin-bottom: 12px;">
                <div style="font-weight:900; color: var(--navy2); font-size: 13px;">
                  {{ curso.nombrecurso }}
                </div>
                <div class="p" style="margin-top:4px;">
                  {{ curso.fecha_inicio|default:"-" }} ‚Äî {{ curso.fecha_fin|default:"-" }}
                </div>
                {% if curso.descripcion_curso %}
                  <div class="p" style="margin-top:6px;">{{ curso.descripcion_curso }}</div>
                {% endif %}
                <hr class="sep">
              </div>
            {% empty %}
              <p class="p">No hay formaci√≥n/cursos marcados para mostrar.</p>
            {% endfor %}
          </div>

          <div class="card">
            <div class="pill">Herramientas</div>
            <ul class="list">
              {% for prod in productos %}
                <li>
                  <b style="color: var(--navy2);">{{ prod.nombrerecurso }}</b>
                  {% if prod.descripcion %} ‚Äî {{ prod.descripcion }}{% endif %}
                </li>
              {% empty %}
                <li>No hay herramientas/productos marcados.</li>
              {% endfor %}
            </ul>
          </div>

          <div class="card">
            <div class="pill">Idiomas</div>
            <div class="lang">
              <!-- Si despu√©s creas tabla de idiomas, lo iteramos. Por ahora, texto fijo -->
              <div class="lang-row"><b>ESPA√ëOL</b><span>Nativo</span></div>
              <div class="lang-row"><b>INGL√âS</b><span>Intermedio</span></div>
            </div>
          </div>

        </div>

      </section>

    </div>

    {% else %}
      <div class="card" style="max-width:700px; margin: 0 auto;">
        <div class="pill">Sin perfil</div>
        <p class="p">Crea un registro en <b>DatosPersonales</b> y pon <code>perfil_activo = 1</code>.</p>
      </div>
    {% endif %}

  </div>

  <script>
    document.getElementById("btnPrint")?.addEventListener("click", () => window.print());
  </script>
</body>
</html>
